<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Specification Part I</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Program Eval III</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="Datasets_in_R.html">Data</a>
</li>
<li>
  <a href="specification-part-I.html">Specification</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DS4PS/PROG-EVAL-III/tree/master/TEXTBOOK">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Specification Part I</h1>

</div>


<div id="outliers" class="section level1">
<h1><span class="header-section-number">1</span> OUTLIERS</h1>
<div id="anscombes-quartet-data" class="section level2">
<h2><span class="header-section-number">1.1</span> Anscombe’s Quartet Data</h2>
<pre class="r"><code>data( anscombe )

m1 &lt;- lm( y1 ~ x1, data=anscombe )
m2 &lt;- lm( y2 ~ x2, data=anscombe )
m3 &lt;- lm( y3 ~ x3, data=anscombe )
m4 &lt;- lm( y4 ~ x4, data=anscombe )


par(mfrow = c(2, 2), mar = 0.1+c(4,4,1,1), oma =  c(0, 0, 2, 0))

plot( y1 ~ x1, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 13))
abline( m1, col = &quot;blue&quot;)

plot( y2 ~ x2, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 13))
abline( m2, col = &quot;blue&quot;)

plot( y3 ~ x3, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 13))
abline( m3, col = &quot;blue&quot;)

plot( y4 ~ x4, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 13))
abline( m4, col = &quot;blue&quot;)

mtext(&quot;Anscombe&#39;s 4 Regression data sets&quot;, outer = TRUE, cex = 1.5)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-1-1.png" width="960" /></p>
<p><img src="anscombes.png" /></p>
<pre class="r"><code># {r, results=&#39;asis&#39;}

stargazer( m1, m2, m3, m4, type=&quot;html&quot;, digits=2,
           omit.stat = c(&quot;f&quot;,&quot;ser&quot;) )</code></pre>
</div>
<div id="model-fit-diagnostics" class="section level2">
<h2><span class="header-section-number">1.2</span> Model Fit Diagnostics</h2>
<p>There are a bunch of diagnostics that we can run to examine whether we should worry about specification bias.</p>
<pre class="r"><code>par( mfrow=c(2,2), oma=c(2,0,0,0) )

# plot( m1 )
# mtext( &quot;Model 1&quot;, side=1, outer = TRUE, cex = 1.5)

plot( m3 )
mtext(&quot;Model 3&quot;, size=1, outer = TRUE, cex = 1.5)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-3-1.png" width="960" /></p>
</div>
<div id="residual-analysis" class="section level2">
<h2><span class="header-section-number">1.3</span> Residual Analysis</h2>
<p>The first step in outlier analysis is finding points that are the furthest away from the regression line. We can simply look at the residuals.</p>
<pre class="r"><code>plot( m3$residuals, type=&quot;h&quot;, main=&quot;Residual Analysis&quot;, bty=&quot;n&quot;, ylab=&quot;Y - Yhat&quot; )
points( m3$residuals, pch=19 )
text( 1:11, m3$residuals, 1:11, pos=4, cex=0.8 )
abline( h=0, col=&quot;gray&quot;)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
<p>The problem with this approach is that not all outliers impact the regression in the same way. Outliers near the mean of X and Y will tug the regression line up or down slightly, so they impact the intercept only. Outliers near the lower and upper range of X will tilt the regression line, impacting both the slope and the intercept.</p>
<pre class="r"><code>par( mfrow=c(2,2))

x &lt;- 1:11
y &lt;- 1:11

mm1 &lt;- lm( y ~ x )

plot( x, y, bty=&quot;n&quot;, pch=19, col=&quot;darkgray&quot;, cex=2, ylim=c(-5,25), xlim=c(0,13) )
abline( mm1, col=&quot;red&quot; )

y[6] &lt;- y[6]+10
mm2 &lt;- lm( y ~ x )

plot( x, y, bty=&quot;n&quot;, pch=19, col=&quot;darkgray&quot;, cex=2, ylim=c(-5,25), xlim=c(0,13) )
abline( mm2, col=&quot;red&quot; )

y &lt;- 1:11
y[1] &lt;- y[1] + 10
mm3 &lt;- lm( y ~ x )

plot( x, y, bty=&quot;n&quot;, pch=19, col=&quot;darkgray&quot;, cex=2, ylim=c(-5,25), xlim=c(0,13) )
abline( mm3, col=&quot;red&quot; )

y &lt;- 1:11
y[11] &lt;- y[11] + 10
mm4 &lt;- lm( y ~ x )

plot( x, y, bty=&quot;n&quot;, pch=19, col=&quot;darkgray&quot;, cex=2, ylim=c(-5,25), xlim=c(0,13) )
abline( mm4, col=&quot;red&quot; )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
<pre class="r"><code>stargazer( mm1, mm2, mm3, mm4, type=&quot;html&quot;, digits=2,
           omit.stat = c(&quot;f&quot;,&quot;ser&quot;) )</code></pre>
<table style="text-align:center">
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
y
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
<td>
(4)
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
x
</td>
<td>
1.00<sup>***</sup>
</td>
<td>
1.00<sup>***</sup>
</td>
<td>
0.55<sup>*</sup>
</td>
<td>
1.45<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.00)
</td>
<td>
(0.30)
</td>
<td>
(0.26)
</td>
<td>
(0.26)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
0.00<sup>***</sup>
</td>
<td>
0.91
</td>
<td>
3.64<sup>*</sup>
</td>
<td>
-1.82
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.00)
</td>
<td>
(2.06)
</td>
<td>
(1.78)
</td>
<td>
(1.78)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
11
</td>
<td>
11
</td>
<td>
11
</td>
<td>
11
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
1.00
</td>
<td>
0.55
</td>
<td>
0.32
</td>
<td>
0.77
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
1.00
</td>
<td>
0.50
</td>
<td>
0.25
</td>
<td>
0.75
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="4" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
</div>
<div id="cooks-distance" class="section level2">
<h2><span class="header-section-number">1.4</span> Cook’s Distance</h2>
<p>Let’s focus on one common measure one used to identify outliers that are having a large impact on our regression model. Cook’s distance focuses not on distance from the regression line, but instead is a measure of how much leverage each point will have on the slope of the model.</p>
<pre class="r"><code>cooks.distance( m3 ) %&gt;% pander</code></pre>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="12%" />
<col width="13%" />
<col width="9%" />
<col width="13%" />
<col width="12%" />
<col width="10%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">1</th>
<th align="center">2</th>
<th align="center">3</th>
<th align="center">4</th>
<th align="center">5</th>
<th align="center">6</th>
<th align="center">7</th>
<th align="center">8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.01176</td>
<td align="center">0.002141</td>
<td align="center">1.393</td>
<td align="center">0.005473</td>
<td align="center">0.02598</td>
<td align="center">0.3006</td>
<td align="center">0.0005176</td>
<td align="center">0.03382</td>
</tr>
</tbody>
</table>
<table style="width:47%;">
<colgroup>
<col width="13%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">9</th>
<th align="center">10</th>
<th align="center">11</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.05954</td>
<td align="center">0.0003546</td>
<td align="center">0.006948</td>
</tr>
</tbody>
</table>
<pre class="r"><code>par( mfrow=c(1,2) )

plot( y3 ~ x3, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 13))
abline( m3, col = &quot;blue&quot;)
text( anscombe$x3, anscombe$y3, 1:11, pos=4 )

plot( cooks.distance( m3 ), pch=19, bty=&quot;n&quot;, ylab=&quot;Cook&#39;s Distance&quot; )
text( 1:11, cooks.distance( m3 ), 1:11, pos=4 )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-7-1.png" width="960" /></p>
<p>Dealing with outliers can be tricky because once you start changing your data you are going down a slippery slope toward manufacturing results. In the case that the outlier is a data entry error you can fix it or eliminate it without hesitation. But if the data point is accurate and it has a large impact on your outcome then you need to take care to explain and justify your actions. If you delete outliers then report results before and after you have altered the data for the sake of transparency.</p>
<p>There are several rules of thumb on how to use Cook’s distance to identify outliers:</p>
<ul>
<li>A general rule of thumb is that observations with a Cook’s D of more than 3 times the mean distance is a possible outlier.</li>
<li>An alternative interpretation is to investigate any point over 4/n, where n is the number of observations.</li>
<li>Other authors suggest that any “large” Di should be investigated. How large is “too large”? The consensus seems to be that a Di value of more that 1 indicates an influential value, but you may want to look at values above 0.5.</li>
<li>An alternative (but slightly more technical) way to interpret Di is to find the potential outlier’s percentile value using the F-distribution. A percentile of over 50 indicates a highly influential point.</li>
</ul>
<pre class="r"><code>par( mfrow=c(1,2) )

plot( y3 ~ x3, data=anscombe, main=&quot;Original Data&quot;,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 15), ylim = c(3, 13))
abline( m3, col = &quot;blue&quot;)


anscombe$x3[3] &lt;- NA
anscombe$y3[3] &lt;- NA

m3.2 &lt;- lm( y3 ~ x3, data=anscombe )

plot( y3 ~ x3, data=anscombe, main=&quot;After Outlier Removal&quot;,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 15), ylim = c(3, 13))
abline( m3.2, col = &quot;blue&quot;)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-8-1.png" width="960" /></p>
<pre class="r"><code>stargazer( m3, m3.2, type=&quot;html&quot;, digits=2,
           omit.stat = c(&quot;ser&quot;) )</code></pre>
<table style="text-align:center">
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
y3
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
x3
</td>
<td>
0.50<sup>***</sup>
</td>
<td>
0.35<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.12)
</td>
<td>
(0.0003)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
3.00<sup>**</sup>
</td>
<td>
4.01<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.12)
</td>
<td>
(0.003)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
11
</td>
<td>
10
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.67
</td>
<td>
1.00
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.63
</td>
<td>
1.00
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
17.97<sup>***</sup> (df = 1; 9)
</td>
<td>
1,160,688.00<sup>***</sup> (df = 1; 8)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="2" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
</div>
</div>
<div id="nonlinear-relationships" class="section level1">
<h1><span class="header-section-number">2</span> NONLINEAR RELATIONSHIPS</h1>
<p>How do we address the situation when our relationships are nonlinear? This is important in public policy and program evaluation because of the economic phenomenon of diminishing marginal returns. If we have no resources or program services then providing a little big might have a large impact on the outcome. If we already have lots of resources and access then adding a little more might not have as much of an impact.</p>
<p>Let’s now consider the second case in the quartet.</p>
<pre class="r"><code>plot( y2 ~ x2, data=anscombe,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 3, 
     xlim = c(3, 15), ylim = c(3, 13), bty=&quot;n&quot;)
abline( m2, col = &quot;blue&quot;)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-10-1.png" width="960" /></p>
<p>We can see that the linear model does not adequately represent the true relationship. To get a better model we must introduce quadratic terms to allow for non-linear fit.</p>
<p><strong>Linear:</strong> <span class="math inline">\(Y = b_{0} + b_{1}X1 + e\)</span></p>
<p><strong>Nonlinear:</strong> <span class="math inline">\(Y = b_{0} + b_{1}X1 + b_{2}X1^2 + e\)</span></p>
<pre class="r"><code>x &lt;- anscombe$x2
y &lt;- anscombe$y2

x_squared &lt;- x^2

df &lt;- data.frame( Y=y, X=x, X_squared=x_squared )
row.names(df) &lt;- NULL
df %&gt;% pander</code></pre>
<table style="width:33%;">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Y</th>
<th align="center">X</th>
<th align="center">X_squared</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">9.14</td>
<td align="center">10</td>
<td align="center">100</td>
</tr>
<tr class="even">
<td align="center">8.14</td>
<td align="center">8</td>
<td align="center">64</td>
</tr>
<tr class="odd">
<td align="center">8.74</td>
<td align="center">13</td>
<td align="center">169</td>
</tr>
<tr class="even">
<td align="center">8.77</td>
<td align="center">9</td>
<td align="center">81</td>
</tr>
<tr class="odd">
<td align="center">9.26</td>
<td align="center">11</td>
<td align="center">121</td>
</tr>
<tr class="even">
<td align="center">8.1</td>
<td align="center">14</td>
<td align="center">196</td>
</tr>
<tr class="odd">
<td align="center">6.13</td>
<td align="center">6</td>
<td align="center">36</td>
</tr>
<tr class="even">
<td align="center">3.1</td>
<td align="center">4</td>
<td align="center">16</td>
</tr>
<tr class="odd">
<td align="center">9.13</td>
<td align="center">12</td>
<td align="center">144</td>
</tr>
<tr class="even">
<td align="center">7.26</td>
<td align="center">7</td>
<td align="center">49</td>
</tr>
<tr class="odd">
<td align="center">4.74</td>
<td align="center">5</td>
<td align="center">25</td>
</tr>
</tbody>
</table>
<div id="linear-and-quadratic-models" class="section level3">
<h3><span class="header-section-number">2.0.1</span> Linear and Quadratic Models</h3>
<pre class="r"><code>quad1 &lt;- lm( y ~ x )
quad2 &lt;- lm( y ~ x + x_squared )

stargazer( quad1, quad2, type=&quot;html&quot;, digits=2,
           omit.stat = c(&quot;ser&quot;,&quot;f&quot;) )</code></pre>
<table style="text-align:center">
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
y
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
x
</td>
<td>
0.50<sup>***</sup>
</td>
<td>
2.78<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.12)
</td>
<td>
(0.001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
x_squared
</td>
<td>
</td>
<td>
-0.13<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(0.0001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
3.00<sup>**</sup>
</td>
<td>
-6.00<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.13)
</td>
<td>
(0.004)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
11
</td>
<td>
11
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.67
</td>
<td>
1.00
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.63
</td>
<td>
1.00
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="2" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<pre class="r"><code>par( mfrow=c(1,2) )

plot( y2 ~ x2, data=anscombe, main=&quot;Linear Fit&quot;,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 10), bty=&quot;n&quot;)
abline( m2, col = &quot;blue&quot;)

plot( y2 ~ x2, data=anscombe, main=&quot;Quadratic Fit&quot;,
     col = &quot;red&quot;, pch = 21, bg = &quot;orange&quot;, cex = 1.2, 
     xlim = c(3, 19), ylim = c(3, 10), bty=&quot;n&quot;)


lines( x[order(x)], quad2$fitted.values[order(x)], col = &quot;blue&quot;)</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-13-1.png" width="960" /></p>
</div>
<div id="interpretation-of-program-effects" class="section level2">
<h2><span class="header-section-number">2.1</span> Interpretation of Program Effects</h2>
<p>The main challenge that nonlinear models present is the interpretation of effects.</p>
<p>Up until now we have used the slope of X to determine the impact of our program. If the slope is negative five, for exmaple, we infer that for each additional student we add to the classroom we see a drop in the average standardized test score in the classroom of five points. That doesn’t matter if we have 10 students and we are adding an 11th, or if we have 40 students and we are adding a 41st (which is likely an unrealistic scenario).</p>
<pre class="r"><code>coefficients( quad2 ) %&gt;% round(4)</code></pre>
<p>In the nonlinear case, however, the marginal impact of an additional student will be different depending upon the initial class size. Consider Anscombe’s second case above.</p>
<p><span class="math inline">\(Y = b_{0} + b_{1}X1 + b_{2}X1^2\)</span></p>
<p>Where</p>
<p><span class="math inline">\(b_{0} = -6.00\)</span></p>
<p><span class="math inline">\(b_1 = 2.78\)</span></p>
<p><span class="math inline">\(b_2 = -0.13\)</span></p>
<p>Now let’s consider what happens when we add an additional unit of the treatment in three cases:</p>
<div id="case-1-x6" class="section level4">
<h4><span class="header-section-number">2.1.0.1</span> Case 1: X=6</h4>
<pre class="r"><code>x_pos &lt;- 6

(2.7808)*(x_pos+1) + (-0.1267)*((x_pos+1)^2) -5.9957  - (  (2.7808)*(x_pos) + (-0.1267)*(x_pos^2) -5.9957 )</code></pre>
<p>Program Effect of one additional unit of X: <span class="math inline">\((\hat{Y} | X=7) - (\hat{Y} | X=6 )\)</span></p>
<p><span class="math inline">\([ (2.78)(7) + (-0.13)(7^2) -6 ] - [ (2.78)(6) + (-0.13)(6^2) -6 ] = 1.13\)</span></p>
<p><br></p>
</div>
<div id="case-1-x10" class="section level4">
<h4><span class="header-section-number">2.1.0.2</span> Case 1: X=10</h4>
<pre class="r"><code>x_pos &lt;- 10

(2.7808)*(x_pos+1) + (-0.1267)*((x_pos+1)^2) -5.9957  - (  (2.7808)*(x_pos) + (-0.1267)*(x_pos^2) -5.9957 )</code></pre>
<p><span class="math inline">\((\hat{Y} | X=11) - (\hat{Y} | X=10 )\)</span></p>
<p><span class="math inline">\([ (2.78)(11) + (-0.13)(11^2) -6 ] - [ (2.78)(10) + (-0.13)(10^2) -6 ] = 0.12\)</span></p>
<p><br></p>
</div>
<div id="case-1-x13" class="section level4">
<h4><span class="header-section-number">2.1.0.3</span> Case 1: X=13</h4>
<pre class="r"><code>x_pos &lt;- 13

(2.7808)*(x_pos+1) + (-0.1267)*((x_pos+1)^2) -5.9957  - (  (2.7808)*(x_pos) + (-0.1267)*(x_pos^2) -5.9957 )</code></pre>
<p>Program Effect of one additional unit of X: <span class="math inline">\((\hat{Y} | X=14) - (\hat{Y} | X=13 )\)</span></p>
<p><span class="math inline">\([ (2.78)(14) + (-0.13)(14^2) -6 ] - [ (2.78)(13) + (-0.13)(13^2) -6 ] = -0.64\)</span></p>
<p><br></p>
</div>
<div id="or-more-generally" class="section level4">
<h4><span class="header-section-number">2.1.0.4</span> Or More Generally</h4>
<pre class="r"><code>y.hat &lt;- quad2$fitted.values[order(x)]

dt &lt;- data.frame(  X=4:13, MarginEffect=round(diff( y.hat ),2) ) 
row.names(dt) &lt;- NULL
dt %&gt;% pander</code></pre>
<table style="width:28%;">
<colgroup>
<col width="6%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">X</th>
<th align="center">MarginEffect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">4</td>
<td align="center">1.64</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">1.39</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">1.13</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">0.88</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">0.63</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">0.37</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">0.12</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">-0.13</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">-0.39</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">-0.64</td>
</tr>
</tbody>
</table>
<pre class="r"><code># diff( y[order(x)] )</code></pre>
<p><br></p>
</div>
<div id="effects-of-adding-unit-or-subtracting-are-nonsymmetrical" class="section level4">
<h4><span class="header-section-number">2.1.0.5</span> Effects of Adding Unit or Subtracting are Nonsymmetrical</h4>
<p>Also note that if you are in a classroom with ten students, then the effect of adding a student will not be the same as the effect of removing a student.</p>
<p><span class="math inline">\(ABS( (\hat{Y} | X=5) - (\hat{Y} | X=4 ) )\)</span> does not equal <span class="math inline">\(ABS( (\hat{Y} | X=4) - (\hat{Y} | X=5 ) )\)</span></p>
<p><br></p>
</div>
</div>
<div id="reporting-program-effects" class="section level2">
<h2><span class="header-section-number">2.2</span> Reporting Program Effects</h2>
<p>The typical way to address this issue in a program evaluation report is to select several representative cases and report the program effects for each. For example, you might select the typical (median) student, a small classroom (1st quartile of X), and a large classroom (3rd quartile of X).</p>
<p>It is discouraged to interpret model effects at the min and max values of X because they may be outliers and the model predictions will be less robust.</p>
<p><br>
<br></p>
</div>
</div>
<div id="regressions-with-groups" class="section level1">
<h1><span class="header-section-number">3</span> REGRESSIONS WITH GROUPS</h1>
<p>Let’s consider a basic model of wages as a function of experience.</p>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-19-1.png" width="960" /></p>
<p>Our analysis gets much more interesting when we can include groups. In this instance we will include a dummy variable (one that takes on values of 1 or 0) for gender.</p>
<pre class="r"><code>palette( c(&quot;steelblue&quot;,&quot;darkorange3&quot;) )
plot( years, wages, pch=19, col=(female+1), cex=1.5, bty=&quot;n&quot;, 
      main=&quot;Wages by Years of Experience&quot;, xlab=&quot;Years of Experience&quot; )
abline( lm(wages~years), col=&quot;black&quot;, lwd=2 )

points( 25, 1500, col=&quot;steelblue&quot;, pch=19, cex=2 )
text( 25, 1500, &quot;Male&quot;, col=&quot;steelblue&quot;, pos=4 )
points( 25, 7000, col=&quot;darkorange3&quot;, pch=19, cex=2 )
text( 25, 7000, &quot;Female&quot;, col=&quot;darkorange3&quot;, pos=4 )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-20-1.png" width="960" /></p>
<p>When we have dummy variables, our data looks something like this where Female=1 represents women, and Female=0 represents men in the data.</p>
<pre class="r"><code>data.frame( Wages=wages, Years=years, Female=female )[1:10,] %&gt;% pander</code></pre>
<table style="width:35%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Wages</th>
<th align="center">Years</th>
<th align="center">Female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">27022</td>
<td align="center">22</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">15778</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">26577</td>
<td align="center">20</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">12876</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">12208</td>
<td align="center">4</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">6714</td>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">42489</td>
<td align="center">27</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">20049</td>
<td align="center">3</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">21598</td>
<td align="center">3</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">39492</td>
<td align="center">19</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>When we have categorical variables we can now look at many interesting nuances in relationships between the groups. Specifically, in the models reported below we can ask more interesting questions:</p>
<div id="model-1-do-men-and-women-earn-different-wages-on-average" class="section level4">
<h4><span class="header-section-number">3.0.0.1</span> Model 1: Do men and women earn different wages, on average?</h4>
<p><strong>Model:</strong> <span class="math inline">\(Wages = b_0 + b_1*Female\)</span></p>
<p><strong>Test:</strong> If b0 is significant, Men’s wages are different than zero. If b1 is significant, Women’s wages are different than Men’s.</p>
<p><em>Note:</em> This is an unconditional average, so it might be explained by other factors like differences in experience between men and women.</p>
</div>
<div id="model-2-what-is-the-wage-gain-related-to-an-extra-year-of-experience" class="section level4">
<h4><span class="header-section-number">3.0.0.2</span> Model 2: What is the wage gain related to an extra year of experience?</h4>
<p><strong>Model:</strong> <span class="math inline">\(Wages = b_0 + b_1*Years\)</span></p>
<p><strong>Test:</strong> If b1 is significant then it is different than zero, experience does impact wages.</p>
</div>
<div id="model-3-do-men-and-women-have-different-initial-wages-at-the-start-of-their-careers" class="section level4">
<h4><span class="header-section-number">3.0.0.3</span> Model 3: Do men and women have different initial wages at the start of their careers?</h4>
<p><strong>Model:</strong> <span class="math inline">\(Wages = b_0 + b_1*Years + b_2*Female\)</span></p>
<p><strong>Test:</strong> If b2 is significant then the Female intercept (b0+b2) is different than the Male intercept (b0).</p>
</div>
<div id="model-4-are-the-gains-in-wages-related-to-experience-the-same-for-men-and-women" class="section level4">
<h4><span class="header-section-number">3.0.0.4</span> Model 4: Are the gains in wages related to experience the same for men and women?</h4>
<p><strong>Model:</strong> <span class="math inline">\(Wages = b_0 + b_1*Years + b_2*Female + b_3*Years*Female\)</span></p>
<p><strong>Test:</strong> If b3 is significant then the slope for Women (b1+b3) is different than the slope for Men (b1).</p>
<p><em>Note:</em> If b3 is not significant it is better to use the model with one slope for both groups.</p>
<p><br></p>
<pre class="r"><code>m.01 &lt;- lm( wages ~ female )
m.02 &lt;- lm( wages ~ years )
m.03 &lt;- lm( wages ~ years + female )
m.04 &lt;- lm( wages ~ years + female + years*female )


stargazer( m.01, m.02, m.03, m.04, type=&quot;html&quot;, digits=0,
           intercept.bottom = FALSE,
           omit.stat = c(&quot;ser&quot;,&quot;f&quot;,&quot;rsq&quot;,&quot;adj.rsq&quot;) )</code></pre>
<table style="text-align:center">
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
wages
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
<td>
(4)
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
23,007<sup>***</sup>
</td>
<td>
10,187<sup>***</sup>
</td>
<td>
6,701<sup>***</sup>
</td>
<td>
7,906<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(500)
</td>
<td>
(387)
</td>
<td>
(355)
</td>
<td>
(433)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
female
</td>
<td>
7,638<sup>***</sup>
</td>
<td>
</td>
<td>
7,154<sup>***</sup>
</td>
<td>
4,588<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(701)
</td>
<td>
</td>
<td>
(324)
</td>
<td>
(629)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
years:female
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
170<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
(36)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
years
</td>
<td>
</td>
<td>
1,109<sup>***</sup>
</td>
<td>
1,099<sup>***</sup>
</td>
<td>
1,018<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(22)
</td>
<td>
(18)
</td>
<td>
(25)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
1,000
</td>
<td>
1,000
</td>
<td>
1,000
</td>
<td>
1,000
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="4" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<pre class="r"><code>palette( c( adjustcolor( &quot;steelblue&quot;, alpha.f=0.3), adjustcolor( &quot;darkorange3&quot;, alpha.f=0.3)  ) )
plot( female+rnorm(1000,0,0.08), wages, col=female+1, pch=19, bty=&quot;n&quot;,
      xlab=&quot;&quot;, xaxt=&quot;n&quot;, cex=2, main=&quot;Hypothesis 1: Difference in Wages Between Men and Women?&quot; )
axis( side=1, at=c(0,1), c(&quot;Male&quot;,&quot;Female&quot;) )
abline( h=coefficients( m.01 )[1], col=&quot;steelblue&quot;, lwd=2 )
abline( h=sum(coefficients( m.01 )), col=&quot;darkorange3&quot;, lwd=2 )

text( 0.5, coefficients( m.01 )[1], &quot;b0&quot;, pos=3, col=&quot;steelblue&quot; )
text( 0.5, sum(coefficients( m.01 )), &quot;b0 + b1&quot;, pos=3, col=&quot;darkorange3&quot; )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-23-1.png" width="960" /></p>
<pre class="r"><code>palette( c( adjustcolor( &quot;steelblue&quot;, alpha.f=0.3), adjustcolor( &quot;darkorange3&quot;, alpha.f=0.3)  ) )
plot( years+rnorm(1000,0,0.25), wages, pch=19, col=(female+1), cex=1.5, bty=&quot;n&quot;, 
      main=&quot;Hypothesis 2: Relationship Between Experience and Wages?&quot;, xlab=&quot;Years of Experience&quot; )
abline( lm(wages~years), col=&quot;black&quot;, lwd=2 )

points( 25, 1500, col=&quot;steelblue&quot;, pch=19, cex=2 )
text( 25, 1500, &quot;Male&quot;, col=&quot;steelblue&quot;, pos=4 )
points( 25, 7000, col=&quot;darkorange3&quot;, pch=19, cex=2 )
text( 25, 7000, &quot;Female&quot;, col=&quot;darkorange3&quot;, pos=4 )
text( 5, 50000, &quot;Wages = b0 + b1*Years&quot;, cex=1, col=&quot;gray10&quot; )
text( 5, 45000, &quot;Slope = b1&quot;, cex=1, col=&quot;gray10&quot; )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-24-1.png" width="960" /></p>
<pre class="r"><code>b0 &lt;- coefficients(m.03)[1]
b1 &lt;- coefficients(m.03)[2]
b2 &lt;- coefficients(m.03)[3]

palette( c( adjustcolor( &quot;steelblue&quot;, alpha.f=0.3), adjustcolor( &quot;darkorange3&quot;, alpha.f=0.3)  ) )
plot( years+rnorm(1000,0,0.25), wages, pch=19, col=(female+1), cex=1.5, bty=&quot;n&quot;, 
      main=&quot;Hypothesis 3: Difference Wages for Women Conditional on Experience?&quot;, xlab=&quot;Years of Experience&quot;, xlim=c(-5,30) )
abline( a=b0, b=b1, col=&quot;steelblue&quot;, lwd=2 )
abline( a=b0+b2, b=b1, col=&quot;darkorange3&quot;, lwd=2 )

points( 25, 1500, col=&quot;steelblue&quot;, pch=19, cex=2 )
text( 25, 1500, &quot;Male&quot;, col=&quot;steelblue&quot;, pos=4 )
points( 25, 7000, col=&quot;darkorange3&quot;, pch=19, cex=2 )
text( 25, 7000, &quot;Female&quot;, col=&quot;darkorange3&quot;, pos=4 )
text( 5, 50000, &quot;Wages = b0 + b1*Years + b2*Female&quot;, cex=1, col=&quot;gray10&quot; )
text( 5, 45000, &quot;Slope = b1&quot;, cex=1, col=&quot;gray10&quot; )

text( -3.5, 10000, &quot;b0 + b2&quot;, col=&quot;darkorange3&quot;, pos=3 )
text( -3.5, 2450, &quot;b0&quot;, col=&quot;steelblue&quot;, pos=1 )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-25-1.png" width="960" /></p>
<pre class="r"><code>b0 &lt;- coefficients(m.04)[1]
b1 &lt;- coefficients(m.04)[2]
b2 &lt;- coefficients(m.04)[3]
b3 &lt;- coefficients(m.04)[4]


palette( c( adjustcolor( &quot;steelblue&quot;, alpha.f=0.3), adjustcolor( &quot;darkorange3&quot;, alpha.f=0.3)  ) )
plot( years+rnorm(1000,0,0.25), wages, pch=19, col=(female+1), cex=1.5, bty=&quot;n&quot;, 
      main=&quot;Hypothesis 4: Difference Rates of Raises for Women?&quot;, xlab=&quot;Years of Experience&quot;, xlim=c(0,35) )
abline( a=b0, b=b1, col=&quot;steelblue&quot;, lwd=2 )
abline( a=b0+b2, b=b1+b3, col=&quot;darkorange3&quot;, lwd=2 )

points( 25, 1500, col=&quot;steelblue&quot;, pch=19, cex=2 )
text( 25, 1500, &quot;Male&quot;, col=&quot;steelblue&quot;, pos=4 )
points( 25, 7000, col=&quot;darkorange3&quot;, pch=19, cex=2 )
text( 25, 7000, &quot;Female&quot;, col=&quot;darkorange3&quot;, pos=4 )
text( 10, 55000, &quot;Wages = b0 + b1*Years + b2*Female + b3*Years*Female&quot;, cex=1, col=&quot;gray10&quot; )

text( 33, 55000, &quot;b1 + b3&quot;, col=&quot;darkorange3&quot;, pos=3 )
text( 33, 40000, &quot;b1&quot;, col=&quot;steelblue&quot;, pos=1 )</code></pre>
<p><img src="specification-part-I_files/figure-html/unnamed-chunk-26-1.png" width="960" /></p>
<pre class="css"><code>p {
color: black;
margin: 0 0 20px 0;
}

td {
    padding: 3px 10px 3px 10px;
    text-align: center;
}

table
{ 
    margin-left: auto;
    margin-right: auto;
    margin-top:80px;
    margin-bottom:100px;
}

h1, h2{
  margin-top:100px;
  margin-bottom:20px;
}

H5{
    text-align: center;
    color: gray;
    font-size:0.8em;
}

img {
    max-width: 90%;
    display: block;
    margin-right: auto;
    margin-left: auto;
    margin-top:30px;
    margin-bottom:20px;
}

pre {
  overflow-x: auto;
}

pre code {
   display: block; 
   padding: 0.5em;
   margin-bottom:20px;
}

code {
  font-size: 92%;
  border: 10px solid #F8F8F8;
  margin-bottom: 2px;
}

code[class] {
  background-color: #F8F8F8;
}
</code></pre>
<style type="text/css">
p {
color: black;
margin: 0 0 20px 0;
}

td {
    padding: 3px 10px 3px 10px;
    text-align: center;
}

table
{ 
    margin-left: auto;
    margin-right: auto;
    margin-top:80px;
    margin-bottom:100px;
}

h1, h2{
  margin-top:100px;
  margin-bottom:20px;
}

H5{
    text-align: center;
    color: gray;
    font-size:0.8em;
}

img {
    max-width: 90%;
    display: block;
    margin-right: auto;
    margin-left: auto;
    margin-top:30px;
    margin-bottom:20px;
}

pre {
  overflow-x: auto;
}

pre code {
   display: block; 
   padding: 0.5em;
   margin-bottom:20px;
}

code {
  font-size: 92%;
  border: 10px solid #F8F8F8;
  margin-bottom: 2px;
}

code[class] {
  background-color: #F8F8F8;
}

</style>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
